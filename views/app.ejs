<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cassettes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

    <style>
        body{
            background-color: #252525;
            color:white;
        }

        p{
            cursor:pointer;
        }
        </style>

<body>
    <div class="row p-4">
        <div class="col offset-1 lg-6 sm-12 md-12"><%= locals.text || "We ran into some problems!" %></div>
        <div class="col col-lg-4">
            <button class="btn btn-success" style="padding:0.5em;margin:0.4em;">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="30" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16"><path d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/></svg>
                Play</button> 
            <button class="btn btn-warning" style="padding:0.5em;margin:0.5em;">
                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="25" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/><path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/></svg>
                Shuffle</button>
        </div>
        
    </div>


    <div class="player row align-items-center justify-content-center p-2" >
        <div class="col col-lg-4 col-md-4 col-sm-4">Select a Cassette to Play:</div>
        <div class="col col-lg-5 col-md-5 col-sm-5 justify-content-end" ><audio controls autoplay></audio></div> 
    </div>
    <div class="row p-4"></div>
    <div id="music" class="row offset-1">
        <% files.forEach(element => { %>
            <p id=<%= element %> class="row p-2 col-lg-6 col-md-6 col-sm-6" onclick="handlePlay(this)"><%=element.slice(0,element.length-4).replace(/%20/g," ")%></p>
        <% }) %>   
    </div>
    
    
    <script>
        function handlePlay(x){

            let player = document.querySelector(".player").innerHTML
            =`<div class="col col-lg-4 col-md-4 col-sm-4">${x.id.slice(0,x.id.length-4).replace(/%20/g," ")} </div>            
            <div class="col col-lg-5 col-md-5 col-sm-5 justify-content-end">  
                <audio controls autoplay>
                <source src= "/songs/${x.id}">
                </audio> 
            </div>`;
        };       
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>


    <script src="play.js"></script>
</body>
</html>